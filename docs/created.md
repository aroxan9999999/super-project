# Модель Outbox

Создана модель `Outbox` для хранения событий с полями:  
- **Тип события** (`event_type`)  
- **Время события** (`event_date_time`)  
- **Контекст события** (`event_context`)  
- **Статус обработки** (`status`)  

## Функции

- **`process_outbox`** — задача Celery, обрабатывающая очередь Outbox:
  1. Помечает зависшие записи как `failed`.
  2. Выбирает до 500 записей со статусами `pending` или `failed`.
  3. Обновляет их статус на `processing`.
  4. Отправляет записи в ClickHouse через `EventLogClient`.
  5. Помечает успешные записи как `processed`, а при ошибках — как `failed`.

## Тесты

- **`test_outbox_processing`** — проверяет обработку событий и их сохранение в ClickHouse.  
- **`test_retry_failed_events`** — проверяет повторную обработку неудачных событий.  
